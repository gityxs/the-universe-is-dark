(this.webpackJsonplightgame=this.webpackJsonplightgame||[]).push([[0],{20:function(e,t,a){},21:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var s=a(4),r=a.n(s),l=a(10),n=a.n(l),i=(a(20),a(2)),o=a(9),c=a(1),d=a(3),u=a(11),p=a(12),h=(a(7),a(15)),g=a(14),b=(a(21),a(13)),v=a(0),m=!1,f=2e3,j=1500,x=200,y=400,M=1e25,k=1e31,C=1e36,O=1e40,T={particlePhotons:{initialCost:15,costMultiplier:2.35,effect:2,levelCap:23,scalingLevel:23,scalingCostExponent:1.25,improvedScalingCostExponent:1.2},particleCount:{initialCost:30,costMultiplier:50,effect:1.5,levelCap:6,scalingLevel:6,scalingCostExponent:2.8,improvedScalingCostExponent:2.6},particleMass:{initialCost:40,costMultiplier:2,effect:6,levelCap:27,scalingLevel:27,scalingCostExponent:1.35,improvedScalingCostExponent:1.3}},P=[{value:1e4,name:"Temporary Gravity Field",firstDescription:"When the mouse is inside you or you aren't moving, you attract particles more strongly",description:"When the mouse is inside the protostar or it isn't moving, it attracts particles more strongly",unlockText:"With a little stability, you'll have a stronger gravitational attraction."},{value:1e10,name:"Tuned Gravity Field",description:"Increase the power the of gravity field by 50%",unlockText:"Your temporary gravity field has become significantly stronger."},{value:1e15,name:"Permanent Gravity Field",description:"The temporary gravity field always applies",unlockText:"Your temporary gravity field seems quite misnamed now."},{value:1e20,name:"Ultra Gravity Field",description:"Increase the power the of gravity field by another 50%",unlockText:"Your gravity field is more attractive than ever."},{value:M,name:"Stellar Collapse",description:"Unlock the ability to collapse into a star",unlockText:"You made it. It's time to become a star."}],w=[{id:"bonusParticlePhotons",name:"Bonus Particle Photon Upgrades",description:"Provides a free Particle Photon upgrade to each protostar",initialCost:15,costMultiplier:30,scalingLevel:10,scalingCostMultiplier:200},{id:"permanentMilestones",name:"Permanent Protostar Mass Milestones",description:"Permanently unlock a protostar mass milestone for each level of this upgrade",initialCost:150,costMultiplier:50,levelCap:4},{id:"bonusParticleMass",name:"Bonus Particle Mass Upgrades",description:"Provides a free Particle Mass upgrade to each protostar",initialCost:1e11,costMultiplier:20,scalingLevel:10,scalingCostMultiplier:200}],U=[{value:M,name:"Continued Growth",description:"Protostar photon upgrades no longer have a level cap, but they get much more expensive after the previous cap"},{value:1e6*M,name:"Second Protostar",description:"You can now develop two protostars simultaneously"},{value:5e7*M,name:"Unlock Bonus Particle Mass",description:"Unlock an interstellar upgrade to give bonus levels to particle mass"},{value:1e13*M,name:"Improve Protostar Upgrade Scaling",description:"Slightly reduces the rate at which protostar upgrades get more expensive"}],S=[{value:1,name:"Buy Max",description:"Buying photon upgrades now buys as many as possible"},{value:2,name:"Auto Protostar Creation",description:"New protostars are automatically created when you collapse one"},{value:3,name:"Autobuyers",description:"You can enable autobuyers for protostar photon upgrades"},{value:5,name:"Faster Collapse",description:"Speed up the star collapse animation"},{value:12,name:"Auto-Collapse",description:"You can set protostars to auto-collapse"},{value:40,name:"Particles Spawn inside Field",description:"Particles now spawn inside the field instead of outside the edge"},{value:120,name:"Buying Particle Mass Upgrade Simulates Particle Collision",description:"Whenever you buy a Particle Mass upgrade, the protostar grows as if a particle collided"},{value:180,name:"Faster Auto-Collapse",description:"Auto-collapse animations take half the time"},{value:250,name:"Instant Auto-Collapse",description:"When a protostar auto-collapses, it no longer has any animation"}],N={recolor:2,shrink:4,pause:5,expand:5.05,ring:6,revel:7,background:9},F={recolor:.5,shrink:1,pause:1.5,expand:1.55,ring:2,revel:2.5,background:2.5},I={recolor:.25,shrink:.5,pause:.75,expand:.8,ring:1,revel:1.25,background:1.25},R={recolor:N.recolor,shrink:N.shrink-N.recolor,pause:N.pause-N.shrink,expand:N.expand-N.pause,ring:N.ring-N.expand,revel:N.revel-N.ring,background:N.background-N.revel},L={recolor:F.recolor,shrink:F.shrink-F.recolor,pause:F.pause-F.shrink,expand:F.expand-F.pause,ring:F.ring-F.expand,revel:F.revel-F.ring,background:F.background-F.revel},E={recolor:I.recolor,shrink:I.shrink-I.recolor,pause:I.pause-I.shrink,expand:I.expand-I.pause,ring:I.ring-I.expand,revel:I.revel-I.ring,background:I.background-I.revel},Y="The universe is dark.",A="Colliding with that particle emitted a photon. You're pretty sure that's not how physics works.",X="Looks like photons might be useful.",D="More photons for more upgrades.",H="More particles means faster growth. Your size isn't increasing much, but you're absorbing some mass with each collision.",V=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(e){var s;Object(u.a)(this,a),(s=t.call(this,e)).reset=function(){s.confirmingReset=!1;var e=s.getInitState();s.setState(e,s.resizeCanvas),s.fields=[];var t,a=Object(d.a)(e.stars);try{for(a.s();!(t=a.n()).done;){var r=t.value;s.fields.push(s.getInitField(r))}}catch(v){a.e(v)}finally{a.f()}var l=s.offscreenCanvas;if(l){var n=[l.width,l.height],i=n[0],o=n[1],c=i/2,u=o/2,p=l.getContext("2d",{alpha:!1});p.fillStyle="#040612",p.fillRect(0,0,i,o);var h,g=Object(d.a)(e.interstellar.completedStars);try{for(g.s();!(h=g.n()).done;){var b=h.value;p.fillStyle=b.color,p.beginPath(),p.arc(b.x+c,b.y+u,b.radius,0,2*Math.PI),p.fill()}}catch(v){g.e(v)}finally{g.f()}}},s.resetLocalVars=function(){s.mouseX=0,s.mouseY=0,s.mouseClicked=!1},s.getInitState=function(){var e={paused:!1,stars:[],logText:[Y],headerTab:"protostar",interstellarTab:"info",tab:"upgrades",particleLimit:1e3,won:!1,gameLength:0,adjustingParticles:!1,interstellar:{completedStars:[],completedConstellations:[],completedGalaxies:[],photons:0,upgrades:{bonusParticlePhotons:0,permanentMilestones:0,bonusParticleMass:0},milestonesUnlocked:0,stellarMilestonesUnlocked:0,collapseCount:0,interstellarMass:0,interstellarPhotonIncome:0},featureTriggers:{firstPhoton:!1,unlockUpgrades:!1,firstUpgrade:!1,unlockMass:!1,unlockCollapse:!1,firstCollapse:!1},autocollapsersEnabled:[!1,!1],autobuyersEnabled:[{particlePhotons:!1,particleCount:!1,particleMass:!1},{particlePhotons:!1,particleCount:!1,particleMass:!1}]};return e.stars.push(s.getInitStar(e)),e},s.getInitStar=function(e){var t=e.interstellar;return{photons:0,starMass:10,starRadiusFactor:20,particleMass:2*Math.pow(T.particleMass.effect,t.upgrades.bonusParticleMass),particleRadius:3,particleCount:50,particlePhotons:1*Math.pow(T.particlePhotons.effect,t.upgrades.bonusParticlePhotons),backgroundX:0,backgroundY:0,vx:0,vy:0,collapseVX:0,collapseVY:0,completedX:0,completedY:0,gridX:0,gridY:0,velocity:0,mouseGravity:1e6,mouseDrag:.1,collapseTimes:N,collapseLengths:R,upgrades:{particlePhotons:0,particleCount:0,particleMass:0,particleRadius:0,starRadiusFactor:0,permanentMouseGravity:0,gravity:0},milestonesUnlocked:t.upgrades.permanentMilestones,collapsing:!1,collapseFrame:0,lifetime:0}},s.getInitField=function(e){return{colorFrame:0,photons:[],particles:Object(c.a)(Array(e.particleCount).keys()).map((function(){return s.genParticle(e,!1)}))}},s.getStarRadius=function(e,t,a){var r=2e6;s.width<500&&(r*=2e3),s.width<300&&(r*=2e3);var l=20+e.starRadiusFactor*Math.log(e.starMass/10)/Math.log(r);if(!e.collapsing||e.collapseFrame<t.recolor)return l;if(e.collapseFrame<t.shrink)return l*(1-.75*(e.collapseFrame-t.recolor)/a.shrink);if(e.collapseFrame<t.pause)return.25*l;if(e.collapseFrame<t.expand)return l*(.25+.5*(e.collapseFrame-t.pause)/a.expand);if(e.collapseFrame<t.revel)return.75*l;var n=.75*l;return n+(s.getCollapsedRadius(e)-n)*(e.collapseFrame-t.revel)/a.background},s.calcUpgradeCosts=function(e,t){for(var a={},s=0,r=Object.entries(T);s<r.length;s++){var l=Object(o.a)(r[s],2),n=l[0],i=l[1],c=void 0,d=i.scalingCostExponent;t.interstellar.milestonesUnlocked>=4&&(d=i.improvedScalingCostExponent),c=e.upgrades[n]>=i.scalingLevel?i.initialCost*Math.pow(i.costMultiplier,i.scalingLevel)*Math.pow(i.costMultiplier,Math.pow(e.upgrades[n]-i.scalingLevel,d)):i.initialCost*Math.pow(i.costMultiplier,e.upgrades[n]),a[n]={cost:Math.round(c),capped:e.upgrades[n]>=i.levelCap&&t.interstellar.milestonesUnlocked<1}}return a},s.calcInterstellarUpgradeCosts=function(e){var t,a={},s=e.interstellar.upgrades,r=Object(d.a)(w);try{for(r.s();!(t=r.n()).done;){var l=t.value,n=void 0;n=s[l.id]>=l.scalingLevel?l.initialCost*Math.pow(l.costMultiplier,l.scalingLevel)*Math.pow(l.scalingCostMultiplier,s[l.id]-l.scalingLevel):l.initialCost*Math.pow(l.costMultiplier,s[l.id]),a[l.id]={cost:Math.round(n),capped:s[l.id]>=l.levelCap}}}catch(i){r.e(i)}finally{r.f()}return a},s.buyUpgrade=function(e,t,a){s.setState((function(r){var l=Object(c.a)(r.stars),n=Object(i.a)({},r.stars[e]);if(n.collapsing||a.capped)return{};if(n.upgrades=Object(i.a)({},n.upgrades),a.cost>n.photons)return{};var o={stars:l};return s.buyUpgradeInner(t,o,e,r),o}))},s.buyUpgradeInner=function(e,t,a,r){for(var l=t.stars[a],n=s.calcUpgradeCosts(l,r)[e];n.cost<=l.photons;){if(l.photons-=n.cost,l.upgrades[e]+=1,l[e]=Math.floor(l[e]*T[e].effect),t.stars[a]=l,r.featureTriggers.firstUpgrade?"particleCount"!==e||r.featureTriggers.unlockMass||(t.featureTriggers=Object(i.a)({},r.featureTriggers),t.featureTriggers.unlockMass=!0,t.logText=Object(c.a)(r.logText),t.logText.unshift(H)):(t.featureTriggers=Object(i.a)({},r.featureTriggers),t.featureTriggers.firstUpgrade=!0,t.logText=Object(c.a)(r.logText),t.logText.unshift(D)),"particleMass"===e&&(l.particleRadius=s.getParticleRadius(l),r.interstellar.stellarMilestonesUnlocked>=7&&(l.starMass+=l.particleMass)),r.interstellar.stellarMilestonesUnlocked<1)return t;n=s.calcUpgradeCosts(l,r)[e]}},s.buyInterstellarUpgrade=function(e,t){s.setState((function(a){var s=Object(i.a)({},a.interstellar);if(t.capped)return{};if(s.upgrades=Object(i.a)({},s.upgrades),t.cost>s.photons)return{};s.photons-=t.cost,s.upgrades[e]+=1;var r=Object(c.a)(a.stars.map((function(t){var a=Object(i.a)({},t);return"bonusParticlePhotons"===e?a.particlePhotons*=T.particlePhotons.effect:"permanentMilestones"===e?a.milestonesUnlocked=Math.max(s.upgrades[e],a.milestonesUnlocked):"bonusParticleMass"===e&&(a.particleMass*=T.particleMass.effect),a})));return{interstellar:s,stars:r}}))},s.collapse=function(e){s.setState((function(t){var a=Object(c.a)(t.stars),r=Object(i.a)({},a[e]);if(!(r.collapsing||r.milestonesUnlocked<5))return s.prepCollapse(r,t.interstellar,t.autocollapsersEnabled[e]),a[e]=r,{stars:a}}))},s.toggleAutobuyer=function(e,t){s.setState((function(a){var s=Object(c.a)(a.autobuyersEnabled),r=Object(i.a)({},s[e]);return r[t]=!r[t],s[e]=r,{autobuyersEnabled:s}}))},s.toggleAutocollapser=function(e){s.setState((function(t){var a=Object(c.a)(t.autocollapsersEnabled);return a[e]=!a[e],{autocollapsersEnabled:a}}))},s.modifyStar=function(e,t,a){var r=Object(c.a)(s.state.stars),l=Object(i.a)({},r[e]);l[t]=l[t]*a+1,r[e]=l,s.setState({stars:r})},s.preCollapseStar=function(e){var t=Object(c.a)(s.state.stars),a=Object(i.a)({},t[e]);a.starMass=1e25,a.photons=5e9,t[e]=a,s.setState({stars:t})},s.genParticle=function(e,t,a,r,l){l&&l.stellarMilestonesUnlocked>=6&&(t=!1);var n=e.particleRadius;if(void 0===a&&(a={}),t){var i=0===z(2),o=0===z(2);i?(a.x=z(f)-1e3,a.vx=s.getRandomVelocity(!1)*(a.x>0?-1:1),a.vy=-s.getRandomVelocity(!1),a.y=1e3-n,o&&(a.y=-a.y,a.vy=-a.vy)):(a.y=z(j)-750,a.x=750-n,a.vy=s.getRandomVelocity(!1)*(a.y>0?-1:1),a.vx=-s.getRandomVelocity(!1),o&&(a.x=-a.x,a.vx=-a.vx))}else{a.x=z(f)-1e3,a.y=z(j)-750,a.vx=s.getRandomVelocity(!0),a.vy=s.getRandomVelocity(!0);for(var c=a.x*a.x+a.y*a.y;c<1e4||c<r;)a.x=a.x?1.05*a.x:a.x+1,a.y=a.y?1.05*a.y:a.y+1,c=a.x*a.x+a.y*a.y}return a},s.mouseMove=function(e){if(s.canvas.current)if("mouseleave"!==e.type){e.buttons;var t=s.canvas.current.getBoundingClientRect();s.mouseClicked=!0,s.mouseX=e.clientX-t.left-s.canvas.current.width/2,s.mouseY=e.clientY-t.top-s.canvas.current.height/2}else s.mouseClicked=!1},s.touchMove=function(e){if(s.canvas.current)if("touchcancel"!==e.type&&"touchend"!==e.type)if(e.touches.length>0){var t=s.canvas.current.getBoundingClientRect();s.mouseClicked=!0,s.mouseX=e.touches[0].clientX-t.left-s.canvas.current.width/2,s.mouseY=e.touches[0].clientY-t.top-s.canvas.current.height/2}else s.mouseClicked=!1;else s.mouseClicked=!1},s.getRandomVelocity=function(e){var t=z(80)+20;return e&&Math.random()<.5&&(t=-t),t},s.drawCanvas=function(e,t,a,r,l,n){var i=a.particleRadius,o=a.collapseTimes,c=a.collapseLengths,u=s.getStarRadius(a,o,c),p=[e.width,e.height],h=p[0],g=p[1],b=h/2,v=g/2,m=e.getContext("2d",{alpha:!1});if(m.fillStyle="#040612",m.fillRect(0,0,h,g),m.drawImage(t,1e3-b-a.backgroundX,750-v-a.backgroundY,h,g,0,0,h,g),!(n&&l.stellarMilestonesUnlocked>=9&&a.lifetime<.5)){m.beginPath(),m.strokeStyle="#222";for(var f=a.gridX;f<e.width;)f>=0&&(m.beginPath(),m.moveTo(f,0),m.lineTo(f,e.height),m.stroke()),f+=x;for(var j=a.gridY;j<e.height;)j>=0&&(m.beginPath(),m.moveTo(0,j),m.lineTo(e.width,j),m.stroke()),j+=x;m.fillStyle=s.getStarColor(a.starMass,r.colorFrame,a.collapseFrame,o,c),m.beginPath();var y=0,M=0;if(a.collapsing&&a.collapseFrame<o.expand)y=z(4)-2,M=z(4)-2;else if(a.collapsing&&a.collapseFrame>o.revel){var k=a.backgroundX,C=a.backgroundY;0===l.collapseCount&&(k=0,C=0),y=(k+a.completedX)*(a.collapseFrame-o.revel)/c.background,console.log("cx",b),M=(C+a.completedY)*(a.collapseFrame-o.revel)/c.background}m.arc(b+y,v+M,u,0,2*Math.PI),m.fill(),m.fillStyle="#281b11";var O=0,T=0,P=0;if(a.collapsing&&a.collapseFrame>=o.expand&&a.collapseFrame<o.ring&&(T=s.getCollapseRingSize(a.collapseFrame,u,o,c),P=Math.pow(T,2)),!a.collapsing||a.collapseFrame<=o.ring){var w,U=Object(d.a)(r.particles);try{for(U.s();!(w=U.n()).done;){var S=w.value;if(++O>s.state.particleLimit)break;S.x<-b-i||S.x>b+i||S.y<-v-i||S.y>v+i||(P&&Math.pow(S.x,2)+Math.pow(S.y,2)<P||(m.beginPath(),m.arc(S.x+b,S.y+v,i,0,2*Math.PI),m.fill()))}}catch(R){U.e(R)}finally{U.f()}}a.collapsing&&a.collapseFrame>=o.expand&&a.collapseFrame<o.ring&&(m.strokeStyle="#ff4",m.beginPath(),m.arc(b,v,s.getCollapseRingSize(a.collapseFrame,u,o,c),0,2*Math.PI),m.stroke()),m.strokeStyle="#ff4";var N,F=Object(d.a)(r.photons);try{for(F.s();!(N=F.n()).done;){var I=N.value;I.x<-b||I.x>b||I.y<-v||I.y>v||(m.beginPath(),m.moveTo(I.x+b,I.y+v),m.lineTo(I.x+b+I.vx/60,I.y+v+I.vy/60),m.stroke())}}catch(R){F.e(R)}finally{F.f()}}},s.save=function(){localStorage.setItem("universeIsDarkSave",JSON.stringify(s.state))},s.resizeCanvas=function(){null===s.canvas.current||"protostar"!==s.state.headerTab&&"protostar2"!==s.state.headerTab||(s.canvas.current.style.width="100%",s.canvas.current.style.height="100%",s.canvas.current.offsetWidth>f?(s.canvas.current.width=f,s.canvas.current.style.width="2000px"):s.canvas.current.width=s.canvas.current.offsetWidth,s.canvas.current.offsetHeight>j?(s.canvas.current.height=j,s.canvas.current.style.height="1500px"):s.canvas.current.height=s.canvas.current.offsetHeight,s.width=s.canvas.current.width),null!==s.backgroundCanvas.current&&"interstellar"===s.state.headerTab&&(s.backgroundCanvas.current.style.width="100%",s.backgroundCanvas.current.style.height="100%",s.backgroundCanvas.current.offsetWidth>f?(s.backgroundCanvas.current.width=f,s.backgroundCanvas.current.style.width="2000px"):s.backgroundCanvas.current.width=s.backgroundCanvas.current.offsetWidth,s.backgroundCanvas.current.offsetHeight>j?(s.backgroundCanvas.current.height=j,s.backgroundCanvas.current.style.height="1500px"):s.backgroundCanvas.current.height=s.backgroundCanvas.current.offsetHeight,s.width=s.backgroundCanvas.current.width),s.state.paused&&s.forceUpdate()},s.gameLoop=function(e){e>s.lastSave+1e4&&(s.save(),s.lastSave=e);var t=e-s.lastFrame;t>1e3&&(t=1e3);var a=1e3/60,r=!1;e%1e3<a&&(r=!0);for(;t>a;)t-=a,s.state.paused||(1,s.update(a,r),r=!1);s.lastFrame=e-t,s.renderID=window.requestAnimationFrame(s.gameLoop)},s.togglePause=function(){s.setState({paused:!s.state.paused})},s.getCollapseRingSize=function(e,t,a,s){var r=2*Math.max(f,j);return t+(e-a.expand)/s.ring*(r-t)},s.update=function(e,t){for(var a=s.state,r=e/1e3,l={stars:Object(c.a)(a.stars),featureTriggers:Object(i.a)({},a.featureTriggers),logText:a.logText,interstellar:Object(i.a)(Object(i.a)({},a.interstellar),{},{completedStars:Object(c.a)(a.interstellar.completedStars),completedConstellations:Object(c.a)(a.interstellar.completedConstellations),completedGalaxies:Object(c.a)(a.interstellar.completedGalaxies)}),won:a.won,gameLength:a.gameLength+(a.won?0:r),headerTab:a.headerTab,tab:a.tab,interstellarTab:a.interstellarTab};l.interstellar.milestonesUnlocked<U.length&&a.interstellar.interstellarMass>=U[l.interstellar.milestonesUnlocked].value;)if(l.interstellar.milestonesUnlocked++,"interstellar"!==a.headerTab&&(s.flashingHeaderTabs.interstellar=!0),"milestones"!==a.interstellarTab&&(s.flashingInterstellarTabs.milestones=!0),2===l.interstellar.milestonesUnlocked&&l.interstellar.stellarMilestonesUnlocked>=2){var n=s.getInitStar(l);s.fields.push(s.getInitField(n)),l.stars.push(n)}var u=l.interstellar.photons,p=u+a.interstellar.interstellarPhotonIncome*r,h=s.calcInterstellarUpgradeCosts(l);(p>=h.bonusParticlePhotons.cost&&u<h.bonusParticlePhotons.cost||!h.permanentMilestones.capped&&p>=h.permanentMilestones.cost&&u<h.permanentMilestones.cost||l.interstellar.milestonesUnlocked>=3&&p>=h.bonusParticleMass.cost&&u<h.bonusParticleMass.cost)&&("interstellar"!==a.headerTab&&(s.flashingHeaderTabs.interstellar=!0),"upgrades"!==a.interstellarTab&&(s.flashingInterstellarTabs.upgrades=!0)),l.interstellar.photons=p;var g=-1;"protostar"===a.headerTab?g=0:"protostar2"===a.headerTab&&(g=1);var b,v=!1,m=Object(d.a)(l.stars.entries());try{for(m.s();!(b=m.n()).done;){var f=Object(o.a)(b.value,2),j=f[0],M=f[1];M.lifetime+=r;var k=M.collapseTimes,C=M.collapseLengths;M.particleRadius=s.getParticleRadius(M);var O=s.fields[j],T=s.getStarRadius(M,k,C),w=Math.pow(T,2),S=-1e3-M.particleRadius,N=-750-M.particleRadius,F=-S,I=-N;O.colorFrame=(O.colorFrame+r)%10;var R=2e5*Math.log(M.starMass)/Math.log(20),L=M.starMass,E=M.photons+Math.pow(a.interstellar.interstellarPhotonIncome,.5),Y=M.vx,D=M.vy,H=M.velocity,V=5e-4,z=1,B=M.milestonesUnlocked;if(!M.collapsing&&s.mouseClicked&&g===j){var G=s.mouseX*s.mouseX+s.mouseY*s.mouseY,W=Math.pow(G,.5),J=1;W>300&&(J=W/300),(M.milestonesUnlocked>0&&W<=T||M.milestonesUnlocked>2)&&(R+=M.mouseGravity,M.milestonesUnlocked>1&&(R*=1.5),M.milestonesUnlocked>3&&(R*=1.5,V*=1.2),V*=M.mouseDrag),W>T&&(Y+=300*s.mouseX/W/J*r,D+=300*s.mouseY/W/J*r)}else{var q=Math.pow(Y*Y+D*D,.5);if((M.collapsing||q<10)&&(z*=5),q<5&&(z*=10),(q<3||M.milestonesUnlocked>2)&&(R+=M.mouseGravity,M.milestonesUnlocked>1&&(R*=1.5),M.milestonesUnlocked>3&&(R*=1.5,V*=1.2),V*=M.mouseDrag),q<1)Y=D=0;else Y+=(Y<0?1:-1)*(z*Y*Y/q)*r,D+=(D<0?1:-1)*(z*D*D/q)*r}(H=Math.pow(Y*Y+D*D,.5))>y&&(Y*=y/H,D*=y/H,H=y);var K,Q=[],Z=Object(d.a)(O.photons);try{for(Z.s();!(K=Z.n()).done;){var $=K.value;$.x+=$.vx*r,$.y+=$.vy*r,$.x<S||$.x>F||$.y<N||$.y>I||Q.push($)}}catch(be){Z.e(be)}finally{Z.f()}O.photons=Q;var _,ee=Object(d.a)(O.particles);try{for(ee.s();!(_=ee.n()).done;){var te=_.value,ae=te.x*te.x+te.y*te.y,se=Math.pow(ae,.5),re=Math.pow(te.vx*te.vx+te.vy*te.vy,.5);if(te.vx+=(-R/ae*te.x/se+-V*te.vx*te.vx*te.vx/re)*r,te.vy+=(-R/ae*te.y/se+-V*te.vy*te.vy*te.vy/re)*r,te.x+=(te.vx-Y)*r,te.y+=(te.vy-D)*r,(te.x>F&&te.vx-Y>0||te.x<S&&te.vx-Y<0||te.y>I&&te.vy-D>0||te.y<N&&te.vy-D<0)&&s.genParticle(M,!0,te,w,a.interstellar),te.x*te.x+te.y*te.y<Math.pow(M.particleRadius+T,2)){ae=te.x*te.x+te.y*te.y,se=Math.pow(ae,.5);var le={x:T*te.x/se,y:T*te.y/se,vx:1200*te.x/se,vy:1200*te.y/se};s.genParticle(M,!0,te,w,a.interstellar),l.featureTriggers.firstPhoton||(l.featureTriggers.firstPhoton=!0,l.logText.unshift(A)),O.photons.length<a.particleLimit&&(!M.collapsing||M.collapseFrame<k.revel)&&O.photons.push(le),E+=M.particlePhotons,!l.featureTriggers.unlockUpgrades&&E>=10&&(l.featureTriggers.unlockUpgrades=!0,l.logText.unshift(X)),M.collapsing||(L+=M.particleMass)}for(;a.featureTriggers.unlockMass&&B<P.length&&L>=P[B].value;)!l.featureTriggers.firstCollapse&&P[B].unlockText&&l.logText.unshift(P[B].unlockText),++B>=5&&!l.featureTriggers.unlockCollapse?(l.featureTriggers.unlockCollapse=!0,"upgrades"!==a.tab&&(s.flashingTabs[j].upgrades=!0)):l.featureTriggers.unlockCollapse||"milestones"!==a.tab&&(s.flashingTabs[j].milestones=!0)}}catch(be){ee.e(be)}finally{ee.f()}if(!M.collapsing){for(var ne=O.particles.length;ne<M.particleCount;ne++)O.particles.push(s.genParticle(M,!0,void 0,w,a.interstellar));M.milestonesUnlocked>=5&&a.autocollapsersEnabled[j]&&(s.prepCollapse(M,l.interstellar,!0),a.interstellar.stellarMilestonesUnlocked>=9&&(M.collapseFrame=k.background))}var ie=!1;if(M.collapsing){if(M.collapseFrame>=k.expand&&M.collapseFrame<k.revel){var oe=a.particleLimit/10;M.collapseFrame>=k.revel&&(oe-=oe*(M.collapseFrame-k.revel)/C.background);for(var ce=O.photons.length;ce<oe;ce++){var de=2*Math.random()*Math.PI,ue=T*Math.cos(de),pe=T*Math.sin(de);O.photons.push({x:ue,y:pe,vx:1200*ue/T,vy:1200*pe/T})}}M.collapseFrame+=r,M.collapseFrame>k.background&&(ie=!0,v=v||s.finishCollapse(l.stars,j,l))}M=Object(i.a)(Object(i.a)({},M),{},{gridX:(M.gridX-Y*r)%x,gridY:(M.gridY-D*r)%x,backgroundX:M.backgroundX-Y*r*.03,backgroundY:M.backgroundY-D*r*.03,vx:Y,vy:D,velocity:H});var he=s.calcUpgradeCosts(M,l);(!he.particlePhotons.capped&&!a.autobuyersEnabled[j].particlePhotons&&E>=he.particlePhotons.cost&&M.photons<he.particlePhotons.cost||!he.particleCount.capped&&!a.autobuyersEnabled[j].particleCount&&E>=he.particleCount.cost&&M.photons<he.particleCount.cost||!he.particleMass.capped&&!a.autobuyersEnabled[j].particleMass&&E>=he.particleMass.cost&&M.photons<he.particleMass.cost)&&(0===j&&"protostar"!==a.headerTab?s.flashingHeaderTabs.protostar=!0:1===j&&"protostar2"!==a.headerTab&&(s.flashingHeaderTabs.protostar2=!0),"upgrades"!==a.tab&&(s.flashingTabs[j].upgrades=!0)),ie||(l.stars[j]=Object(i.a)(Object(i.a)({},M),{},{starMass:L,photons:E,milestonesUnlocked:B})),M.collapsing||(a.autobuyersEnabled[j].particlePhotons&&s.buyUpgradeInner("particlePhotons",l,j,l),a.autobuyersEnabled[j].particleCount&&s.buyUpgradeInner("particleCount",l,j,l),a.autobuyersEnabled[j].particleMass&&s.buyUpgradeInner("particleMass",l,j,l))}}catch(be){m.e(be)}finally{m.f()}var ge=v?s.resizeCanvas:function(){};s.setState(l,ge)},s.prepCollapse=function(e,t,a){e.collapsing=!0,e.collapseFrame=0;var r=0;t.collapseCount<20&&(r=20);var l=Math.min(s.width/4,300),n=Math.min(s.width/3,400),i=l+t.collapseCount;i>n&&(i=n*Math.pow(i/n,.4));var o=r+z(i+t.collapseCount),c=2*Math.random()*Math.PI;e.completedX=o*Math.cos(c),e.completedY=o*Math.sin(c),t.stellarMilestonesUnlocked>=8&&a?(e.collapseTimes=I,e.collapseLengths=E):t.stellarMilestonesUnlocked>=4&&(e.collapseTimes=F,e.collapseLengths=L)},s.getParticleRadius=function(e){var t=125;return s.width<500&&(t*=5),s.width<300&&(t*=5),.25*Math.log(e.particleMass)/Math.log(t)+4},s.createProtostar=function(){s.state.stars.length||s.setState((function(e){var t=Object(c.a)(e.stars),a=s.getInitStar(e);return t.push(a),s.fields.push(s.getInitField(a)),{stars:t,headerTab:"protostar",tab:"upgrades"}}),s.resizeCanvas)},s.getCollapsedRadius=function(e){return 1.2+Math.log(e.starMass/M)/Math.log(1e6)},s.finishCollapse=function(e,t,a){var r=e[t];a.featureTriggers.firstCollapse||(a.featureTriggers.firstCollapse=!0),a.interstellar.collapseCount++;var l={color:s.getStarColor(r.starMass,5,0,{},{}),x:r.completedX,y:r.completedY,radius:s.getCollapsedRadius(r)},n=s.offscreenCanvas,i=[n.width,n.height],o=i[0]/2,c=i[1]/2,d=n.getContext("2d",{alpha:!1});d.fillStyle=l.color,d.beginPath(),d.arc(l.x+o,l.y+c,l.radius,0,2*Math.PI),d.fill();var u=!1;for(a.interstellar.completedStars.length<2e4&&a.interstellar.completedStars.push(l),a.interstellar.interstellarMass+=r.starMass,a.interstellar.interstellarPhotonIncome=a.interstellar.interstellarMass/1e25*10*a.interstellar.collapseCount,!a.won&&a.interstellar.interstellarPhotonIncome>=1e25&&(a.headerTab="interstellar",a.interstellarTab="victory",a.won=!0,u=!0);a.interstellar.stellarMilestonesUnlocked<S.length&&a.interstellar.collapseCount>=S[a.interstellar.stellarMilestonesUnlocked].value;)if(a.interstellar.stellarMilestonesUnlocked++,"interstellar"!==a.headerTab&&(s.flashingHeaderTabs.interstellar=!0),"stellarMilestones"!==a.interstellarTab&&(s.flashingInterstellarTabs.stellarMilestones=!0),a.interstellar.milestonesUnlocked>=2&&1===a.stars.length){var p=s.getInitStar(a);s.fields.push(s.getInitField(p)),a.stars.push(r)}return a.interstellar.stellarMilestonesUnlocked<2?(a.headerTab="interstellar",s.flashingHeaderTabs.interstellar=!1,r.collapsed=!0,s.fields.splice(t,1),e.splice(t,1),u=!0):(a.tab="upgrades",s.flashingTabs[t]={},e[t]=s.getInitStar(a),s.fields[t]=s.getInitField(e[t])),u},s.lastFrame=window.performance.now(),s.lastSave=window.performance.now(),s.mainPanel=r.a.createRef(),s.canvas=r.a.createRef(),s.backgroundCanvas=r.a.createRef(),s.offscreenCanvas=document.createElement("canvas"),s.offscreenCanvas.width=f,s.offscreenCanvas.height=j,s.drewBackground=!1,s.confirmingReset=!1,s.width=0,s.flashingTabs=[{},{}],s.flashingHeaderTabs={},s.flashingInterstellarTabs={};var l=localStorage.getItem("universeIsDarkSave");s.state=l?JSON.parse(l):s.getInitState(),s.fields=[];var n,p=Object(d.a)(s.state.stars);try{for(p.s();!(n=p.n()).done;){var h=n.value;s.fields.push(s.getInitField(h))}}catch(g){p.e(g)}finally{p.f()}return s.resetLocalVars(),s}return Object(p.a)(a,[{key:"render",value:function(){var e,t,a=this,s=this.state,l=0,n=s.stars[l],i=this.fields[l],o=s.featureTriggers;"protostar"===s.headerTab?e=this.calcUpgradeCosts(n,s):"protostar2"===s.headerTab?(l=1,n=s.stars[l],i=this.fields[l],e=this.calcUpgradeCosts(n,s)):("protostar"===s.headerTab&&(console.log("Accidentally on protostar tab"),s.headerTab="interstellar"),t=this.calcInterstellarUpgradeCosts(s));var d="protostar"===s.headerTab||"protostar2"===s.headerTab,u=this.canvas.current;null!==u&&d&&this.drawCanvas(u,this.offscreenCanvas,n,i,s.interstellar,s.autocollapsersEnabled[l]);var p=this.backgroundCanvas.current;if(null!==p&&"interstellar"===s.headerTab){var h=[p.width,p.height],g=h[0],b=h[1],f=g/2,j=b/2;p.getContext("2d",{alpha:!1}).drawImage(this.offscreenCanvas,1e3-f,750-j,g,b,0,0,g,b)}var x=100*Math.log(s.interstellar.interstellarPhotonIncome)/Math.log(1e25);x>100&&(x=100);var y=s.interstellar.milestonesUnlocked>=2,M=s.interstellar.stellarMilestonesUnlocked>=3;return Object(v.jsxs)("div",{id:"verticalFlex",children:[Object(v.jsxs)("div",{className:"header",children:[Object(v.jsx)("div",{className:"headerTabs",children:o.firstCollapse&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"button "+(0===s.stars.length?"disabled ":"")+("protostar"===s.headerTab?"selected ":"")+(this.flashingHeaderTabs.protostar?"flashing ":""),onClick:function(){0!==s.stars.length&&(a.setState({headerTab:"protostar"},a.resizeCanvas),a.flashingHeaderTabs.protostar=!1)},children:["Protostar",y&&" #1"]}),y&&Object(v.jsx)("div",{className:"button "+(0===s.stars.length?"disabled ":"")+("protostar2"===s.headerTab?"selected ":"")+(this.flashingHeaderTabs.protostar2?"flashing ":""),onClick:function(){0!==s.stars.length&&(a.setState({headerTab:"protostar2"},a.resizeCanvas),a.flashingHeaderTabs.protostar2=!1)},children:"Protostar #2"}),Object(v.jsx)("div",{className:"button "+("interstellar"===s.headerTab?"selected ":"")+(this.flashingHeaderTabs.interstellar?"flashing ":""),onClick:function(){a.setState({headerTab:"interstellar"},a.resizeCanvas),a.flashingHeaderTabs.interstellar=!1},children:"Interstellar"})]})}),Object(v.jsxs)("div",{className:"headerButtons",children:[this.state.adjustingParticles?Object(v.jsxs)(v.Fragment,{children:["Particle Render Limit: ",this.state.particleLimit,Object(v.jsx)("input",{type:"range",min:"50",max:"1000",value:this.state.particleLimit,onChange:function(e){a.setState({particleLimit:e.target.value}),e.preventDefault()}}),Object(v.jsx)("div",{className:"button",onClick:function(){return a.setState({adjustingParticles:!1})},children:"OK"})]}):Object(v.jsx)("div",{className:"button",onClick:function(){return a.setState({adjustingParticles:!0})},children:"Settings"}),Object(v.jsx)("div",{className:"button",onClick:this.togglePause,children:s.paused?"Resume":"Pause"}),m,this.confirmingReset?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"button",onClick:this.reset,children:"Confirm Reset"}),Object(v.jsx)("div",{className:"button",onClick:function(){a.confirmingReset=!1},children:"Cancel Reset"})]}):Object(v.jsx)("div",{className:"button",onClick:function(){a.confirmingReset=!0},children:"Reset"})]})]}),Object(v.jsxs)("div",{id:"flex",children:[Object(v.jsxs)("div",{className:"panel",id:"leftPanel",children:[d&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"panelHeader",children:[o.firstPhoton&&Object(v.jsxs)("span",{className:"headerElement",children:[Object(v.jsx)("span",{className:"headerValue",children:B(n.photons,!0)})," ","photon",n.photons>1?"s":""]}),o.unlockMass&&Object(v.jsx)("span",{className:"headerElement headerValue",children:B(n.starMass,!0,1,"g")})]}),o.unlockUpgrades&&Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"tabs",children:[Object(v.jsx)("div",{className:"tab "+("upgrades"===s.tab?"selected ":"")+(this.flashingTabs[l].upgrades?"flashing ":""),onClick:function(){a.setState({tab:"upgrades"}),a.flashingTabs[l].upgrades=!1},children:"Upgrades"}),o.unlockMass&&Object(v.jsx)("div",{className:"tab "+("milestones"===s.tab?"selected ":"")+(this.flashingTabs[l].milestones?"flashing ":""),onClick:function(){a.setState({tab:"milestones"}),a.flashingTabs[l].milestones=!1},children:"Mass Milestones"})]}),Object(v.jsxs)("div",{className:"tabPane",children:["upgrades"===s.tab&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{id:"upgrades",children:[Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsxs)("div",{style:{flexBasis:M?"75%":"100%"},className:"upgrade button"+(e.particlePhotons.capped||n.photons<e.particlePhotons.cost?" disabled":""),onClick:function(){return a.buyUpgrade(l,"particlePhotons",e.particlePhotons)},children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{className:"upgradeName",children:"Particle Photons"})," ",e.particlePhotons.capped?"Max Level":B(e.particlePhotons.cost,!0)+" photons"]}),Object(v.jsxs)("p",{className:"upgradeDesc",children:["Increase the number of photons generated by particle collisions by"," ",Math.round(100*(T.particlePhotons.effect-1)),"%"]})]}),M&&Object(v.jsx)("div",{className:"autobuyer button "+(s.autobuyersEnabled[l].particlePhotons?"enabled":""),onClick:function(){return a.toggleAutobuyer(l,"particlePhotons")},children:Object(v.jsx)("p",{children:"Autobuy"})})]}),o.firstUpgrade&&Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsxs)("div",{style:{flexBasis:M?"75%":"100%"},className:"upgrade button"+(e.particleCount.capped||n.photons<e.particleCount.cost?" disabled":""),onClick:function(){return a.buyUpgrade(l,"particleCount",e.particleCount)},children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{className:"upgradeName",children:"Particle Count"})," ",e.particleCount.capped?"Max Level":B(e.particleCount.cost,!0)+" photons"]}),Object(v.jsxs)("p",{className:"upgradeDesc",children:["Increase the number of particles in the field by"," ",Math.round(100*(T.particleCount.effect-1)),"%"]})]}),M&&Object(v.jsx)("div",{className:"autobuyer button "+(s.autobuyersEnabled[l].particleCount?"enabled":""),onClick:function(){return a.toggleAutobuyer(l,"particleCount")},children:Object(v.jsx)("p",{children:"Autobuy"})})]}),o.unlockMass&&Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsxs)("div",{style:{flexBasis:M?"75%":"100%"},className:"upgrade button"+(e.particleMass.capped||n.photons<e.particleMass.cost?" disabled":""),onClick:function(){return a.buyUpgrade(l,"particleMass",e.particleMass)},children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{className:"upgradeName",children:"Particle Mass"})," ",e.particleMass.capped?"Max Level":B(e.particleMass.cost,!0)+" photons"]}),Object(v.jsxs)("p",{className:"upgradeDesc",children:["Increase the mass of particles in the field by"," ",Math.round(100*(T.particleMass.effect-1)),"%"]})]}),M&&Object(v.jsx)("div",{className:"autobuyer button "+(s.autobuyersEnabled[l].particleMass?"enabled":""),onClick:function(){return a.toggleAutobuyer(l,"particleMass")},children:Object(v.jsx)("p",{children:"Autobuy"})})]})]}),o.unlockCollapse&&Object(v.jsx)("div",{id:"collapse",children:Object(v.jsx)("div",{className:"collapse button"+(n.milestonesUnlocked<5||n.collapsing?" disabled":""),onClick:function(){return a.collapse(l)},children:Object(v.jsx)("p",{children:Object(v.jsx)("span",{className:"upgradeName",children:"Collapse into a star"})})})}),s.interstellar.stellarMilestonesUnlocked>=5&&Object(v.jsx)("div",{id:"autocollapse",children:Object(v.jsx)("div",{className:"autocollapseWrapper",children:Object(v.jsx)("div",{className:"button autocollapser "+(s.autocollapsersEnabled[l]?"enabled":""),onClick:function(){return a.toggleAutocollapser(l)},children:"Auto-collapse"})})})]}),"milestones"===s.tab&&Object(v.jsx)("div",{id:"milestones",children:Object(c.a)(Array(Math.min(n.milestonesUnlocked+1,P.length)).keys()).map((function(e,t){return Object(v.jsxs)("div",{className:"milestone"+(t>=n.milestonesUnlocked?" disabled":""),children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{className:"upgradeName",children:P[t].name})," "+B(P[t].value,!0,1,"g")]}),Object(v.jsx)("p",{className:"upgradeDesc",children:P[t].firstDescription&&!o.firstCollapse?P[t].firstDescription:P[t].description})]},t)}))})]})]}),!o.firstCollapse&&Object(v.jsx)("div",{id:"log",children:s.logText.map((function(e,t){return Object(v.jsx)("p",{children:e},s.logText.length-t)}))})]}),"interstellar"===s.headerTab&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"panelHeader",children:[Object(v.jsxs)("div",{className:"headerElement",children:[Object(v.jsx)("span",{className:"headerValue",children:B(s.interstellar.photons,!0)})," ","interstellar photon",s.interstellar.photons>1?"s":""," ","(+",B(s.interstellar.interstellarPhotonIncome,!0),"/s)"]})," ",Object(v.jsx)("div",{className:"headerElement headerValue",children:B(s.interstellar.interstellarMass,!0,1,"g")}),s.interstellar.collapseCount>1&&Object(v.jsxs)("div",{className:"headerElement",children:[" ",Object(v.jsx)("span",{className:"headerValue",children:B(s.interstellar.collapseCount,!0)})," ","stars"]})]}),Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"tabs",children:[Object(v.jsx)("div",{className:"tab "+("info"===s.interstellarTab?"selected":""),onClick:function(){return a.setState({interstellarTab:"info"})},children:"Info"}),Object(v.jsx)("div",{className:"tab "+("upgrades"===s.interstellarTab?"selected":"")+(this.flashingInterstellarTabs.upgrades?"flashing ":""),onClick:function(){a.setState({interstellarTab:"upgrades"}),a.flashingInterstellarTabs.upgrades=!1},children:"Upgrades"}),Object(v.jsx)("div",{className:"tab "+("milestones"===s.interstellarTab?"selected":"")+(this.flashingInterstellarTabs.milestones?"flashing ":""),onClick:function(){a.setState({interstellarTab:"milestones"}),a.flashingInterstellarTabs.milestones=!1},children:"Mass Milestones"}),Object(v.jsx)("div",{className:"tab "+("stellarMilestones"===s.interstellarTab?"selected":"")+(this.flashingInterstellarTabs.stellarMilestones?"flashing ":""),onClick:function(){a.setState({interstellarTab:"stellarMilestones"}),a.flashingInterstellarTabs.stellarMilestones=!1},children:"Stellar Milestones"}),s.won&&Object(v.jsx)("div",{className:"tab "+("victory"===s.interstellarTab?"selected":""),onClick:function(){return a.setState({interstellarTab:"victory"})},children:"Victory"})]}),Object(v.jsxs)("div",{className:"tabPane",children:["info"===s.interstellarTab&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("p",{children:"You've become a star, and yet you realize, you are more than just this star. You are this universe, and you want to fill it with light. By creating new protostars, you can continue creating new stars."}),Object(v.jsx)("p",{children:"Each star you create generates interstellar photons based on its mass and the number of stars you've created. These interstellar photons can be used to buy powerful upgrades and also provide a small income to new protostars. Additionally, reaching stellar mass milestones and stellar count milestones will provide further boosts."}),Object(v.jsx)("p",{children:"If you were generating 1e25 interstellar photons per second, that would be enough to light up the universe."}),Object(v.jsx)("p",{children:"Good luck!"}),s.interstellar.stellarMilestonesUnlocked<2&&Object(v.jsx)("div",{className:"collapse button"+(s.stars.length>0?" disabled":""),onClick:function(){return a.createProtostar()},children:Object(v.jsx)("p",{children:Object(v.jsx)("span",{className:"upgradeName",children:"Create New Protostar"})})})]}),"upgrades"===s.interstellarTab&&Object(v.jsx)("div",{id:"upgrades",children:w.map((function(e){return"bonusParticleMass"===e.id&&s.interstellar.milestonesUnlocked<3?Object(v.jsx)(r.a.Fragment,{},e.id):Object(v.jsxs)("div",{className:"interstellar upgrade button"+(t[e.id].capped||s.interstellar.photons<t[e.id].cost?" disabled":""),onClick:function(){return a.buyInterstellarUpgrade(e.id,t[e.id])},children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{className:"upgradeName",children:e.name})," ",t[e.id].capped?"Max Level":B(t[e.id].cost,!0)+" interstellar photons"]}),Object(v.jsx)("p",{className:"upgradeDesc",children:e.description})]},e.id)}))}),"milestones"===s.interstellarTab&&Object(v.jsx)("div",{id:"milestones",children:Object(c.a)(Array(Math.min(s.interstellar.milestonesUnlocked+1,U.length)).keys()).map((function(e,t){var a=U[t];return Object(v.jsxs)("div",{className:"milestone"+(t>=s.interstellar.milestonesUnlocked?" disabled":""),children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{className:"upgradeName",children:a.name})," "+B(a.value,!0,1,"g")]}),Object(v.jsx)("p",{className:"upgradeDesc",children:a.description})]},t)}))}),"stellarMilestones"===s.interstellarTab&&Object(v.jsx)("div",{id:"milestones",children:Object(c.a)(Array(Math.min(s.interstellar.stellarMilestonesUnlocked+1,S.length)).keys()).map((function(e,t){var a=S[t];return Object(v.jsxs)("div",{className:"milestone"+(t>=s.interstellar.stellarMilestonesUnlocked?" disabled":""),children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{className:"upgradeName",children:a.name})," "+B(Math.min(a.value,s.interstellar.collapseCount),!0)+"/"+B(a.value,!0)+" star"+(a.value>1?"s":"")]}),Object(v.jsx)("p",{className:"upgradeDesc",children:a.description})]},t)}))}),"victory"===s.interstellarTab&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h2",{children:"The universe is bright."}),Object(v.jsxs)("p",{children:["Congratulations! You won in"," ",B(s.gameLength/60,!0,1)," minutes. Thanks for playing!"]}),Object(v.jsx)("p",{children:"You can keep playing, but the star field is capped at 20k stars, and progress gets very slow."})]})]})]})]})]}),Object(v.jsxs)("div",{ref:this.mainPanel,className:"panel",id:"mainPanel",children:[d&&Object(v.jsx)("canvas",{className:"starfield",ref:this.canvas,onMouseMove:this.mouseMove,onMouseDown:this.mouseMove,onMouseUp:this.mouseMove,onMouseLeave:this.mouseMove,onTouchStart:this.touchMove,onTouchMove:this.touchMove,onTouchEnd:this.touchMove,onTouchCancel:this.touchMove}),"interstellar"===s.headerTab&&Object(v.jsx)("canvas",{ref:this.backgroundCanvas})]})]}),o.firstCollapse&&Object(v.jsxs)("div",{className:"progress",children:[Object(v.jsx)("div",{style:{width:x+"%",postition:"absolute",top:0,left:0,height:"21px",backgroundColor:"#151"}}),Object(v.jsxs)("div",{style:{position:"absolute",top:0,left:0},children:[x.toFixed(2),"% to Lighting up the Universe (1e25 interstellar photons/s)"]})]})]})}},{key:"getStarColor",value:function(e,t,a,s,r){var l,n,i,o=5;if(e<=M){var c=Math.log(e)/Math.log(M);l=29.6+c*(9.9-29.6),n=87.1,i=19.6,o*=1+.2*c}else if(e<=k){var d=Math.log(e/M)/Math.log(999999.9999999999);l=9.9+d*(64.6-9.9),n=87.1+3*d,i=19.6+56.1*d,o*=1.2+.2*d}else if(e<=C){var u=Math.log(e/k)/Math.log(100000.00000000001);l=64.6+0*u,n=90.1+-90.1*u,i=75.7+u*(95.6-75.7),o*=1.4+.2*u}else if(e<=O){var p=Math.log(e/C)/Math.log(1e4);l=228.6,n=0+72.8*p,i=95.6+p*(72.8-95.6),o*=1.6+.2*p}else l=228.6,n=72.8,i=72.8,o=1.8;var h=t/5;t>=5&&(h=(10-t)/5),a&&(a<s.recolor?h*=1-a/r.recolor:h=a<s.shrink?(a-s.recolor)/r.shrink:1);var g=n,v=o+(i-o)*h;return Object(b.hsluvToHex)([l,g,v])}},{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.save),window.addEventListener("resize",this.resizeCanvas),this.resizeCanvas();var e=this.offscreenCanvas;if(e){var t=[e.width,e.height],a=t[0],s=t[1],r=a/2,l=s/2,n=e.getContext("2d",{alpha:!1});n.fillStyle="#040612",n.fillRect(0,0,a,s);var i,o=Object(d.a)(this.state.interstellar.completedStars);try{for(o.s();!(i=o.n()).done;){var c=i.value;n.fillStyle=c.color,n.beginPath(),n.arc(c.x+r,c.y+l,c.radius,0,2*Math.PI),n.fill()}}catch(u){o.e(u)}finally{o.f()}}this.renderID=window.requestAnimationFrame(this.gameLoop)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.save),window.cancelAnimationFrame(this.renderID)}}]),a}(r.a.Component);function z(e){return Math.floor(Math.random()*Math.floor(e))}function B(e,t,a){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(void 0===e)return"undefined";if(e>1e15){var r=Math.floor(Math.log(e)/Math.log(10));return e/Math.pow(10,r)>=9.99?"1.00e"+(r+1)+s:(e/Math.pow(10,r)).toFixed(2)+"e"+r+s}var l="",n=1;if(e>1e12)l="T",n=1e12;else if(e>=1e9)l="G",n=1e9;else if(e>=1e6)l="M",n=1e6;else if(e>=1e3)l="k",n=1e3;else if(t)return a?e.toFixed(a)+s:e.toFixed(0)+s;return(e/n).toFixed(3)+l+s}var G=V;n.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(G,{})}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.b7666da4.chunk.js.map